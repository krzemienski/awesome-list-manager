(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[455],{5124:function(e,t,r){Promise.resolve().then(r.bind(r,3748))},3748:function(e,t,r){"use strict";r.r(t),r.d(t,{UserSettings:function(){return P}});var n=r(7437),s=r(2265),a=r(575),o=r(2782),i=r(9069),l=r(2210);function u(e){let t=s.useRef(e);return s.useEffect(()=>{t.current=e}),s.useMemo(()=>(...e)=>t.current?.(...e),[])}var d=globalThis?.document?s.useLayoutEffect:()=>{};r(4887);var c=r(7256),f=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=s.forwardRef((e,r)=>{let{asChild:s,...a}=e,o=s?c.g7:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(o,{...a,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),p="Switch",[m,h]=function(e,t=[]){let r=[],a=()=>{let t=r.map(e=>s.createContext(e));return function(r){let n=r?.[e]||t;return s.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return a.scopeName=e,[function(t,a){let o=s.createContext(a),i=r.length;r=[...r,a];let l=t=>{let{scope:r,children:a,...l}=t,u=r?.[e]?.[i]||o,d=s.useMemo(()=>l,Object.values(l));return(0,n.jsx)(u.Provider,{value:d,children:a})};return l.displayName=t+"Provider",[l,function(r,n){let l=n?.[e]?.[i]||o,u=s.useContext(l);if(u)return u;if(void 0!==a)return a;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=r.reduce((t,{useScope:r,scopeName:n})=>{let s=r(e)[`__scope${n}`];return{...t,...s}},{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}(a,...t)]}(p),[g,b]=m(p),v=s.forwardRef((e,t)=>{let{__scopeSwitch:r,name:a,checked:o,defaultChecked:i,required:d,disabled:c,value:p="on",onCheckedChange:m,form:h,...b}=e,[v,x]=s.useState(null),y=(0,l.e)(t,e=>x(e)),N=s.useRef(!1),k=!v||h||!!v.closest("form"),[_=!1,S]=function({prop:e,defaultProp:t,onChange:r=()=>{}}){let[n,a]=function({defaultProp:e,onChange:t}){let r=s.useState(e),[n]=r,a=s.useRef(n),o=u(t);return s.useEffect(()=>{a.current!==n&&(o(n),a.current=n)},[n,a,o]),r}({defaultProp:t,onChange:r}),o=void 0!==e,i=o?e:n,l=u(r);return[i,s.useCallback(t=>{if(o){let r="function"==typeof t?t(e):t;r!==e&&l(r)}else a(t)},[o,e,a,l])]}({prop:o,defaultProp:i,onChange:m});return(0,n.jsxs)(g,{scope:r,checked:_,disabled:c,children:[(0,n.jsx)(f.button,{type:"button",role:"switch","aria-checked":_,"aria-required":d,"data-state":j(_),"data-disabled":c?"":void 0,disabled:c,value:p,...b,ref:y,onClick:function(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e?.(n),!1===r||!n.defaultPrevented)return t?.(n)}}(e.onClick,e=>{S(e=>!e),k&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())})}),k&&(0,n.jsx)(w,{control:v,bubbles:!N.current,name:a,value:p,checked:_,required:d,disabled:c,form:h,style:{transform:"translateX(-100%)"}})]})});v.displayName=p;var x="SwitchThumb",y=s.forwardRef((e,t)=>{let{__scopeSwitch:r,...s}=e,a=b(x,r);return(0,n.jsx)(f.span,{"data-state":j(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})});y.displayName=x;var w=e=>{let{control:t,checked:r,bubbles:a=!0,...o}=e,i=s.useRef(null),l=function(e){let t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(r),u=function(e){let[t,r]=s.useState(void 0);return d(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let n,s;if(!Array.isArray(t)||!t.length)return;let a=t[0];if("borderBoxSize"in a){let e=a.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,s=t.blockSize}else n=e.offsetWidth,s=e.offsetHeight;r({width:n,height:s})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}(t);return s.useEffect(()=>{let e=i.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(l!==r&&t){let n=new Event("click",{bubbles:a});t.call(e,r),e.dispatchEvent(n)}},[l,r,a]),(0,n.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...o,tabIndex:-1,ref:i,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function j(e){return e?"checked":"unchecked"}var N=r(2169);let k=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(v,{className:(0,N.cn)("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-blue-600 data-[state=unchecked]:bg-gray-200",r),...s,ref:t,children:(0,n.jsx)(y,{className:(0,N.cn)("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});k.displayName=v.displayName;var _=s.forwardRef((e,t)=>(0,n.jsx)(f.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));_.displayName="Label";let S=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(_,{ref:t,className:(0,N.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...s})});S.displayName=_.displayName;let R=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,N.cn)("rounded-lg border bg-white text-gray-950 shadow-sm",r),...s})});R.displayName="Card";let C=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,N.cn)("flex flex-col space-y-1.5 p-6",r),...s})});C.displayName="CardHeader";let E=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("h3",{ref:t,className:(0,N.cn)("text-lg font-semibold leading-none tracking-tight",r),...s})});E.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("p",{ref:t,className:(0,N.cn)("text-sm text-gray-500",r),...s})}).displayName="CardDescription";let O=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,N.cn)("p-6 pt-0",r),...s})});function P(){let[e,t]=(0,s.useState)({}),[r,l]=(0,s.useState)(!0),[u,d]=(0,s.useState)(!1),[c,f]=(0,s.useState)(null),[p,m]=(0,s.useState)(!1);(0,s.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await fetch("/api/user/settings");if(!e.ok)throw Error("Failed to load settings");let r=await e.json();t(r||{})}catch(e){console.error("Error loading settings:",e),f("Failed to load settings")}finally{l(!1)}},g=e=>r=>{t(t=>({...t,[e]:r}))},b=async t=>{t.preventDefault(),d(!0),f(null),m(!1);try{let t=await fetch("/api/user/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to save settings")}m(!0)}catch(e){console.error("Error saving settings:",e),f(e.message||"Failed to save settings")}finally{d(!1)}};return r?(0,n.jsx)("div",{className:"flex justify-center p-4",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):(0,n.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,n.jsxs)(R,{children:[(0,n.jsx)(C,{children:(0,n.jsx)(E,{children:"AI Settings"})}),(0,n.jsxs)(O,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(S,{htmlFor:"openai_api_key",children:"OpenAI API Key"}),(0,n.jsx)(o.I,{id:"openai_api_key",type:"password",value:e.openai_api_key||"",onChange:e=>{t(t=>({...t,openai_api_key:e.target.value}))},placeholder:"sk-..."}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Required for AI-powered features like auto-categorization and suggestions"})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(S,{htmlFor:"auto_categorize",children:"Auto-categorize new links"}),(0,n.jsx)(k,{id:"auto_categorize",checked:e.auto_categorize||!1,onCheckedChange:g("auto_categorize")})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(S,{htmlFor:"auto_suggest",children:"Automatically suggest related links"}),(0,n.jsx)(k,{id:"auto_suggest",checked:e.auto_suggest||!1,onCheckedChange:g("auto_suggest")})]})]})]})]}),c&&(0,n.jsx)(i.b,{variant:"destructive",children:c}),p&&(0,n.jsx)(i.b,{children:"Settings saved successfully"}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(a.z,{type:"submit",disabled:u,children:u?"Saving...":"Save Settings"})})]})}O.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,N.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},9069:function(e,t,r){"use strict";r.d(t,{b:function(){return a}});var n=r(7437),s=r(2169);function a(e){let{children:t,variant:r="default",className:a}=e;return(0,n.jsx)("div",{className:(0,s.cn)("rounded-lg border p-4","default"===r&&"bg-blue-50 border-blue-200 text-blue-800","destructive"===r&&"bg-red-50 border-red-200 text-red-800",a),role:"alert",children:t})}},575:function(e,t,r){"use strict";r.d(t,{z:function(){return u}});var n=r(7437),s=r(2265),a=r(7256),o=r(6061),i=r(2169);let l=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),u=s.forwardRef((e,t)=>{let{className:r,variant:s,size:o,asChild:u=!1,...d}=e,c=u?a.g7:"button";return(0,n.jsx)(c,{className:(0,i.cn)(l({variant:s,size:o,className:r})),ref:t,...d})});u.displayName="Button"},2782:function(e,t,r){"use strict";r.d(t,{I:function(){return o}});var n=r(7437),s=r(2265),a=r(2169);let o=s.forwardRef((e,t)=>{let{className:r,type:s,...o}=e;return(0,n.jsx)("input",{type:s,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...o})});o.displayName="Input"},2169:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var n=r(7042),s=r(4769);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}},622:function(e,t,r){"use strict";var n=r(2265),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var n,a={},u=null,d=null;for(n in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,n)&&!l.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:s,type:e,key:u,ref:d,props:a,_owner:i.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},7437:function(e,t,r){"use strict";e.exports=r(622)}},function(e){e.O(0,[621,971,938,744],function(){return e(e.s=5124)}),_N_E=e.O()}]);