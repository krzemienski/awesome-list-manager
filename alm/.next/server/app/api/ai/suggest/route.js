"use strict";(()=>{var e={};e.id=90,e.ids=[90],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2361:e=>{e.exports=require("events")},7147:e=>{e.exports=require("fs")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},1808:e=>{e.exports=require("net")},7561:e=>{e.exports=require("node:fs")},4492:e=>{e.exports=require("node:stream")},2477:e=>{e.exports=require("node:stream/web")},1017:e=>{e.exports=require("path")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},4404:e=>{e.exports=require("tls")},7310:e=>{e.exports=require("url")},3837:e=>{e.exports=require("util")},1267:e=>{e.exports=require("worker_threads")},9796:e=>{e.exports=require("zlib")},253:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>h,originalPathname:()=>q,patchFetch:()=>y,requestAsyncStorage:()=>g,routeModule:()=>d,serverHooks:()=>x,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>f});var s={};r.r(s),r.d(s,{POST:()=>l});var i=r(5419),o=r(9108),n=r(9678),a=r(8070),u=r(7699),p=r(2455),c=r(8105);async function l(e){try{let t;let r=(0,u.createRouteHandlerClient)({cookies:p.cookies}),{data:{session:s}}=await r.auth.getSession();if(!s)return a.Z.json({error:"Unauthorized"},{status:401});let i=await e.json(),{type:o,url:n}=i;if(!o||!n)return a.Z.json({error:"Missing required fields"},{status:400});let{data:l}=await r.from("user_settings").select("openai_api_key").eq("user_id",s.user.id).single();if(!(l?.openai_api_key||process.env.OPENAI_API_KEY))return a.Z.json({error:"OpenAI API key not configured"},{status:400});switch(o){case"category":if(!i.title)return a.Z.json({error:"Missing title for category suggestion"},{status:400});t=await c.SQ(n,i.title,i.description||"");break;case"related":t=await c.xe(n);break;default:return a.Z.json({error:"Invalid suggestion type"},{status:400})}return a.Z.json({result:t})}catch(e){return console.error("Error getting AI suggestions:",e),a.Z.json({error:"Internal server error"},{status:500})}}let d=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/ai/suggest/route",pathname:"/api/ai/suggest",filename:"route",bundlePath:"app/api/ai/suggest/route"},resolvedPagePath:"/Users/nick/Desktop/alm/src/app/api/ai/suggest/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:x,headerHooks:h,staticGenerationBailout:f}=d,q="/api/ai/suggest/route";function y(){return(0,n.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:m})}},8105:(e,t,r)=>{r.d(t,{SQ:()=>n,bc:()=>o,xe:()=>a});var s=r(5185);let i=null;function o(e){i=new s.ZP({apiKey:e})}async function n(e,t,r){if(!i)throw Error("OpenAI client not initialized");let s=`Given this resource:
URL: ${e}
Title: ${t}
Description: ${r}

Suggest up to 3 appropriate categories for this resource in an awesome list. Return only the category names, one per line.`,o=await i.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"user",content:s}],temperature:.7,max_tokens:100});return o.choices[0].message.content?.split("\n").filter(Boolean)||[]}async function a(e){if(!i)throw Error("OpenAI client not initialized");let t=`Given this URL: ${e}

Suggest 3 related resources that would be good additions to an awesome list. Return them in this format:
Title: [title]
URL: [url]
Description: [brief description]

---`;return((await i.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"user",content:t}],temperature:.7,max_tokens:500})).choices[0].message.content||"").split("---").filter(Boolean).map(e=>{let t=e.trim().split("\n");return{title:t[0].replace("Title:","").trim(),url:t[1].replace("URL:","").trim(),description:t[2].replace("Description:","").trim()}})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[225,280,185],()=>r(253));module.exports=s})();